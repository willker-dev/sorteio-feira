<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sorteio Sebrae PrevidÃªncia</title>
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" href="img/favicon.ico" type="jpg">
</head>
<body>
    <div class="imagem">
        <img src="img/logo_12821 (1).png" alt="logo sebrae">
    </div>
    <h1>Sorteio de Brindes 22Â° Oficina dos Gestores</h1>
    <div class="container">
        <!-- Lista de nomes adicionados -->
        <div id="nomesAdicionados">
            <h2>Nomes Adicionados</h2>
            <ul id="listaNomes"></ul>
        </div>

        <!-- Mensagem de confirmaÃ§Ã£o -->
        <p id="mensagem"></p>

        <!-- BotÃµes para sortear e reiniciar -->
        <div>
            <button onclick="sortearNome()">Sortear Nome</button>
            <button onclick="reiniciarSorteio()">Reiniciar Sorteio</button>
        </div>

        <!-- SobreposiÃ§Ã£o de tela de carregamento -->
        <div id="loaderOverlay" class="overlay">
            <div class="loader"></div>
        </div>
    </div>

    <script>
        // Array para armazenar os nomes
        let nomes = [];
        let nomePessoa = '';

        // Array para registrar nomes jÃ¡ sorteados
        let nomesSorteados = [];

        // FunÃ§Ã£o para carregar nomes do arquivo de texto
        async function carregarNomes() {
            try {
                const response = await fetch('nomes.txt');
                if (!response.ok) {
                    throw new Error('NÃ£o foi possÃ­vel carregar os nomes.');
                }
                const text = await response.text();
                nomes = text.split('\n').filter(nome => nome.trim() !== ''); // Divide o texto por quebras de linha e remove linhas em branco
                exibirMensagem('ðŸŽ²Sorteio ProntoðŸŽ².');
            } catch (error) {
                exibirMensagem('Erro ao carregar nomes: ' + error.message);
            }
        }

        // Chame a funÃ§Ã£o de carregamento de nomes ao iniciar a pÃ¡gina
        carregarNomes();

        // FunÃ§Ã£o para sortear um nome aleatÃ³rio
        function sortearNome() {
            if (nomes.length === 0) {
                exibirMensagem('Nenhum nome para sortear.');
            } else {
                exibirLoader();
                setTimeout(() => {
                    if (nomesSorteados.length === nomes.length) {
                        exibirMensagem('Todos os nomes jÃ¡ foram sorteados. Clique em "Reiniciar Sorteio" para sortear novamente.');
                        ocultarLoader();
                        return;
                    }

                    let nomeSorteado;
                    do {
                        const indiceSorteado = Math.floor(Math.random() * nomes.length);
                        nomeSorteado = nomes[indiceSorteado];
                    } while (nomesSorteados.includes(nomeSorteado)); // Verifica se o nome jÃ¡ foi sorteado

                    nomesSorteados.push(nomeSorteado); // Adiciona o nome sorteado Ã  lista de sorteados
                    nomePessoa = nomeSorteado;
                    exibirMensagem(`ðŸŽ‰O nome sorteado Ã©: ${nomePessoa}ðŸŽ‰`);
                    ocultarLoader();
                }, 2000); // Simula um atraso de 2 segundos para o sorteio
            }
        }

        // FunÃ§Ã£o para exibir uma mensagem
        function exibirMensagem(mensagem) {
            const mensagemElement = document.getElementById('mensagem');
            mensagemElement.textContent = mensagem;
        }

        // FunÃ§Ã£o para exibir o loader
        function exibirLoader() {
            const loaderOverlay = document.getElementById('loaderOverlay');
            loaderOverlay.style.display = 'flex';
        }

        // FunÃ§Ã£o para ocultar o loader
        function ocultarLoader() {
            const loaderOverlay = document.getElementById('loaderOverlay');
            loaderOverlay.style.display = 'none';
        }

        // FunÃ§Ã£o para reiniciar o sorteio
        function reiniciarSorteio() {
            nomePessoa = '';
            nomesSorteados = []; // Limpa a lista de nomes sorteados
            exibirMensagem('ðŸŽ²Sorteio ProntoðŸŽ².');
        }
    </script>
</body>
</html>
